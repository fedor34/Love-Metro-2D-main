# –°–∏—Å—Ç–µ–º–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø–æ–ª—è - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø–æ–ª—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–æ–Ω—ã –Ω–∞ –∏–≥—Ä–æ–≤–æ–º –ø–æ–ª–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥–≤–∏–∂–µ–Ω–∏–µ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤. –ü–µ—Ä–≤—ã–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç - **–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è**, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏—Ç—è–≥–∏–≤–∞–µ—Ç –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ –∫ —Ü–µ–Ω—Ç—Ä—É –∑–æ–Ω—ã.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- **IFieldEffect** - –±–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- **IFieldEffectTarget** - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤, –ø–æ–¥–≤–µ—Ä–∂–µ–Ω–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–∞–º
- **FieldEffectZone** - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –∑–æ–Ω —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- **FieldEffectManager** - —Å–∏–Ω–≥–ª—Ç–æ–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
- **FieldEffectData** - –¥–∞–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ (—Å–∏–ª–∞, —Ä–∞–¥–∏—É—Å, —Ç–∏–ø)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫:
```
FieldEffects/
‚îú‚îÄ‚îÄ Interfaces/
‚îÇ   ‚îú‚îÄ‚îÄ IFieldEffect.cs
‚îÇ   ‚îî‚îÄ‚îÄ IFieldEffectTarget.cs
‚îú‚îÄ‚îÄ Core/
‚îÇ   ‚îú‚îÄ‚îÄ FieldEffectManager.cs
‚îÇ   ‚îú‚îÄ‚îÄ FieldEffectZone.cs
‚îÇ   ‚îî‚îÄ‚îÄ FieldEffectData.cs
‚îú‚îÄ‚îÄ Effects/
‚îÇ   ‚îú‚îÄ‚îÄ GravityFieldEffect.cs
‚îÇ   ‚îî‚îÄ‚îÄ GravityFieldEffectPrefabCreator.cs
‚îî‚îÄ‚îÄ Documentation/
    ‚îî‚îÄ‚îÄ FieldEffectsGuide.md
```

## üéØ –≠—Ñ—Ñ–µ–∫—Ç –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏

### –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏:

1. **–ß–µ—Ä–µ–∑ –º–µ–Ω—é Unity:**
   - GameObject ‚Üí Field Effects ‚Üí Gravity Field Effect
   - –ò–ª–∏ GameObject ‚Üí Field Effects ‚Üí Gravity Field Effect With Particles

2. **–ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ:**
```csharp
GameObject gravityObj = new GameObject("Gravity Effect");
GravityFieldEffect gravity = gravityObj.AddComponent<GravityFieldEffect>();
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏:

#### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (FieldEffectData):
- **Effect Type** - —Ç–∏–ø —ç—Ñ—Ñ–µ–∫—Ç–∞ (Gravity)
- **Strength** - —Å–∏–ª–∞ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è (1-10)
- **Radius** - —Ä–∞–¥–∏—É—Å –¥–µ–π—Å—Ç–≤–∏—è (–≤ Unity units)
- **Max Force** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–º–µ–Ω–∏–º–∞—è —Å–∏–ª–∞

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:
- **Affects Falling** - –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–∞–¥–∞—é—â–∏—Ö –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤
- **Affects Wandering** - –≤–ª–∏—è–µ—Ç –Ω–∞ –±–ª—É–∂–¥–∞—é—â–∏—Ö –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤
- **Affects Handrail** - –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–µ—Ä–∂–∞—â–∏—Ö—Å—è –∑–∞ –ø–æ—Ä—É—á–Ω–∏
- **Affects Matching** - –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–∞—Ä—ã

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏:
- **Use Square Distance Falloff** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–∫–æ–Ω –æ–±—Ä–∞—Ç–Ω—ã—Ö –∫–≤–∞–¥—Ä–∞—Ç–æ–≤
- **Minimal Force** - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–º–µ–Ω–∏–º–∞—è —Å–∏–ª–∞
- **Affect Only Falling** - –≤–æ–∑–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–∞–¥–∞—é—â–∏—Ö

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WandererNew

–ö–ª–∞—Å—Å `WandererNew` —Ç–µ–ø–µ—Ä—å —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IFieldEffectTarget`:

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:
- `ApplyFieldForce(Vector2 force, FieldEffectType effectType)` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–∏–ª—ã
- `CanBeAffectedBy(FieldEffectType effectType)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è
- `OnEnterFieldEffect(IFieldEffect effect)` - –≤—Ö–æ–¥ –≤ –∑–æ–Ω—É —ç—Ñ—Ñ–µ–∫—Ç–∞
- `OnExitFieldEffect(IFieldEffect effect)` - –≤—ã—Ö–æ–¥ –∏–∑ –∑–æ–Ω—ã —ç—Ñ—Ñ–µ–∫—Ç–∞

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö:
- **Wandering**: —ç—Ñ—Ñ–µ–∫—Ç –∏–∑–º–µ–Ω—è–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è
- **Falling**: —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ Rigidbody2D –Ω–∞–ø—Ä—è–º—É—é
- **StayingOnHandrail**: —ç—Ñ—Ñ–µ–∫—Ç –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **Matching**: —ç—Ñ—Ñ–µ–∫—Ç –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –ø–∞—Ä–∞–º

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∏–≥—Ä–µ

### –†–∞–∑–º–µ—â–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:
1. –î–æ–±–∞–≤—å—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –º–µ–Ω—é
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ Inspector
3. –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –≤ –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ –Ω–∞ —Å—Ü–µ–Ω–µ
4. –≠—Ñ—Ñ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ FieldEffectManager

### –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞:
- **Show Debug Gizmos** - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–æ–Ω—ã –≤ Scene View
- –ñ–µ–ª—Ç—ã–π –∫—Ä—É–≥ - –∑–æ–Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è
- –ö—Ä–∞—Å–Ω—ã–π —Ü–µ–Ω—Ç—Ä - —Ç–æ—á–∫–∞ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è
- –ì–æ–ª—É–±—ã–µ –ª—É—á–∏ - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–ª

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏:
```csharp
// –ü–æ–ª—É—á–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
FieldEffectManager manager = FieldEffectManager.Instance;

// –û—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏
manager.SetEffectsActiveByType(FieldEffectType.Gravity, false);

// –ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
int activeCount = manager.GetActiveEffectsCount();
```

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞:
1. –ù–∞—Å–ª–µ–¥—É–π—Ç–µ—Å—å –æ—Ç `FieldEffectZone`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã `ApplyEffect()` –∏ `RemoveEffect()`
3. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Ç–∏–ø –≤ `FieldEffectType`
4. –û–±–Ω–æ–≤–∏—Ç–µ –ª–æ–≥–∏–∫—É –≤ `WandererNew.CanBeAffectedBy()`

### –ü—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞:
```csharp
public class WindFieldEffect : FieldEffectZone
{
    [SerializeField] private Vector2 _windDirection = Vector2.right;
    
    public override void ApplyEffect(IFieldEffectTarget target, float deltaTime)
    {
        Vector2 windForce = _windDirection.normalized * _effectData.strength;
        target.ApplyFieldForce(windForce, FieldEffectType.Wind);
    }
    
    public override void RemoveEffect(IFieldEffectTarget target)
    {
        // –í–µ—Ç–µ—Ä –Ω–µ –æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
    }
}
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑—É–º–Ω—ã–µ —Ä–∞–¥–∏—É—Å—ã —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- –ù–µ —Ä–∞–∑–º–µ—â–∞–π—Ç–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –±–ª–∏–∑–∫–æ –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É
- –û—Ç–∫–ª—é—á–∞–π—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —á–µ—Ä–µ–∑ `SetActive(false)`

### Debugging:
- –í–∫–ª—é—á–∏—Ç–µ Debug Mode –≤ FieldEffectManager
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Show Debug Gizmos –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ Console

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ—Å—Ç–∞—è –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–æ–Ω–Ω–∞—è —è–º–∞:
```csharp
var gravity = CreateGravityEffect();
gravity.SetGravityStrength(8f);
gravity.SetGravityRadius(4f);
gravity.ToggleSquareDistanceFalloff(true);
```

### –°–ª–∞–±–æ–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ –∫ –ø–æ—Ä—É—á–Ω—è–º:
```csharp
var magneticHandrail = CreateGravityEffect();
magneticHandrail.SetGravityStrength(2f);
magneticHandrail.SetGravityRadius(1.5f);
magneticHandrail._effectData.affectsWandering = true;
magneticHandrail._effectData.affectsHandrail = false;
```

---

*–°–∏—Å—Ç–µ–º–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø–æ–ª—è –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é –Ω–æ–≤—ã–º–∏ —Ç–∏–ø–∞–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤!* 