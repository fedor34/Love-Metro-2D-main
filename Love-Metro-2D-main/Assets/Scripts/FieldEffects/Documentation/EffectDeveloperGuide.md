# üöÄ –ì–∞–π–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø–æ–ª—è

## üìã –û–±–∑–æ—Ä –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –ü—Ä–æ–±–ª–µ–º—ã —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã:
1. **FieldEffectManager —Å–æ–∑–¥–∞–≤–∞–ª—Å—è —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ** - —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å
2. **DontDestroyOnLoad –≤—ã–∑—ã–≤–∞–ª –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã** –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞–º–∏
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤** - —ç—Ñ—Ñ–µ–∫—Ç—ã –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞
4. **–ñ–µ—Å—Ç–∫–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** - —Å–ª–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã
5. **–ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–∞–µ—Ç:
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** —á–µ—Ä–µ–∑ `[RuntimeInitializeOnLoadMethod]`  
‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤** —ç—Ñ—Ñ–µ–∫—Ç–æ–≤  
‚úÖ **–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å BaseFieldEffect** —É–ø—Ä–æ—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ  
‚úÖ **–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
‚úÖ **–ö–æ–º–ø–æ–∑–∏—Ü–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤** - –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ  
‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** —á–µ—Ä–µ–∑ FieldEffectData  

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
FieldEffects/
‚îú‚îÄ‚îÄ Core/
‚îÇ   ‚îú‚îÄ‚îÄ FieldEffectSystem.cs          # –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–∑–∞–º–µ–Ω–∞ Manager)
‚îÇ   ‚îú‚îÄ‚îÄ BaseFieldEffect.cs           # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ FieldEffectData.cs           # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ FieldEffectZone.cs           # –°—Ç–∞—Ä—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å (deprecated)
‚îú‚îÄ‚îÄ Effects/
‚îÇ   ‚îú‚îÄ‚îÄ GravityFieldEffectNew.cs     # –ù–æ–≤–∞—è –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ WindFieldEffect.cs           # –≠—Ñ—Ñ–µ–∫—Ç –≤–µ—Ç—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ VortexFieldEffect.cs         # –≠—Ñ—Ñ–µ–∫—Ç –≤–∏—Ö—Ä—è
‚îÇ   ‚îî‚îÄ‚îÄ [–í–∞—à–∏ –Ω–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã]
‚îú‚îÄ‚îÄ Interfaces/
‚îÇ   ‚îú‚îÄ‚îÄ IFieldEffect.cs              # –ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îî‚îÄ‚îÄ IFieldEffectTarget.cs        # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ü–µ–ª–µ–π
‚îî‚îÄ‚îÄ Documentation/
    ‚îî‚îÄ‚îÄ EffectDeveloperGuide.md      # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üéØ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ - –ø–æ—à–∞–≥–æ–≤—ã–π –≥–∞–π–¥

### –®–∞–≥ 1: –î–æ–±–∞–≤—å—Ç–µ —Ç–∏–ø —ç—Ñ—Ñ–µ–∫—Ç–∞

–í `FieldEffectData.cs` –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π —Ç–∏–ø –≤ enum:

```csharp
public enum FieldEffectType
{
    // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã...
    YourNewEffect,  // –í–∞—à –Ω–æ–≤—ã–π —Ç–∏–ø
}
```

–ò –≤ –º–µ—Ç–æ–¥–µ `SetDefaultsForEffectType()`:

```csharp
case FieldEffectType.YourNewEffect:
    forceMode = ForceMode2D.Force;
    respectMass = true;
    effectColor = Color.magenta;
    break;
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å —ç—Ñ—Ñ–µ–∫—Ç–∞

```csharp
using UnityEngine;

/// <summary>
/// –û–ø–∏—Å–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
/// </summary>
public class YourNewFieldEffect : BaseFieldEffect
{
    [Header("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞")]
    [SerializeField] private float _yourParameter = 1f;
    [SerializeField] private bool _yourBoolParameter = false;
    
    protected override FieldEffectData CreateDefaultEffectData()
    {
        return new FieldEffectData(FieldEffectType.YourNewEffect, 3f, 6f, transform.position);
    }
    
    protected override void InitializeEffectData()
    {
        base.InitializeEffectData();
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –≤–∞—à–µ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
        _gizmoColor = Color.magenta;
        _effectData.effectColor = Color.magenta;
    }
    
    public override void ApplyEffect(IFieldEffectTarget target, float deltaTime)
    {
        if (!_isActive || target == null) return;
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
        Vector3 targetPos = target.GetPosition();
        float distance = Vector3.Distance(transform.position, targetPos);
        
        if (distance > _effectData.radius) return;
        if (!target.CanBeAffectedBy(_effectData.effectType)) return;
        
        // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —Å–∏–ª—ã
        Vector3 force = CalculateYourForce(target, distance);
        target.ApplyFieldForce(force, _effectData.forceMode);
    }
    
    private Vector3 CalculateYourForce(IFieldEffectTarget target, float distance)
    {
        float strength = _effectData.GetEffectiveStrength(distance);
        // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞...
        return Vector3.zero;
    }
}
```

### –®–∞–≥ 3: –î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–±—Ä–∏–∫—É

–í `BaseFieldEffect.cs` –≤ –º–µ—Ç–æ–¥–µ `CreateEffect()`:

```csharp
return type switch
{
    FieldEffectType.Gravity => CreateEffect<GravityFieldEffectNew>(position, data),
    FieldEffectType.Wind => CreateEffect<WindFieldEffect>(position, data),
    FieldEffectType.Vortex => CreateEffect<VortexFieldEffect>(position, data),
    FieldEffectType.YourNewEffect => CreateEffect<YourNewFieldEffect>(position, data), // –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É
    _ => throw new System.NotImplementedException($"–¢–∏–ø —ç—Ñ—Ñ–µ–∫—Ç–∞ {type} –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω")
};
```

### –®–∞–≥ 4: –°–æ–∑–¥–∞–π—Ç–µ –º–µ–Ω—é —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```csharp
#if UNITY_EDITOR
[UnityEditor.MenuItem("GameObject/Field Effects/Your New Effect", false, 10)]
public static void CreateYourEffect()
{
    var effect = FieldEffectFactory.CreateEffect<YourNewFieldEffect>(Vector3.zero);
    UnityEditor.Selection.activeGameObject = effect.gameObject;
}
#endif
```

---

## üîß –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞

```csharp
public class AdvancedEffect : BaseFieldEffect
{
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    protected override void InitializeComponents()
    {
        base.InitializeComponents();
        // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
    protected override void OnUpdateEffect()
    {
        base.OnUpdateEffect();
        // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    }
    
    // –£–¥–∞–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ —Å —Ü–µ–ª–∏
    public override void RemoveEffect(IFieldEffectTarget target)
    {
        // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏
        base.RemoveEffect(target);
    }
    
    // –ö–∞—Å—Ç–æ–º–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ Gizmos
    protected override void DrawEffectRadius()
    {
        base.DrawEffectRadius();
        // –í–∞—à–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
    }
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π —Å–∏—Å—Ç–µ–º—ã

```csharp
void Start()
{
    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è —Å–∏—Å—Ç–µ–º—ã
    FieldEffectSystem.OnEffectAppliedToTarget += OnEffectApplied;
    FieldEffectSystem.OnEffectRemovedFromTarget += OnEffectRemoved;
}

private void OnEffectApplied(IFieldEffectTarget target, IFieldEffect effect)
{
    Debug.Log($"–≠—Ñ—Ñ–µ–∫—Ç {effect.GetEffectData().effectType} –ø—Ä–∏–º–µ–Ω–µ–Ω –∫ {target}");
}
```

### –†–∞–±–æ—Ç–∞ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ –∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏–µ–π

```csharp
protected override void InitializeEffectData()
{
    base.InitializeEffectData();
    
    // –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º
    _priority = 10;
    
    // –ù–µ —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
    _effectData.stackable = false;
    
    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã —Å –º–µ–Ω—å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º
    _effectData.overrideOtherEffects = true;
}
```

---

## üìä –¢–∏–ø—ã —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

### üå™Ô∏è –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–≤–∏–∂–µ–Ω–∏—è (Movement)
- **Gravity** - –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ –∫ —Ü–µ–Ω—Ç—Ä—É
- **Repulsion** - –æ—Ç—Ç–∞–ª–∫–∏–≤–∞–Ω–∏–µ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞  
- **Wind** - –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Å–∏–ª–∞ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
- **Magnetic** - –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- **Vortex** - –∑–∞–∫—Ä—É—á–∏–≤–∞—é—â–∞—è —Å–∏–ª–∞

### ‚ö° –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (Modifier)
- **Slowdown** - –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è
- **Speedup** - —É—Å–∫–æ—Ä–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è
- **Friction** - —Ç—Ä–µ–Ω–∏–µ/—Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ
- **Bounce** - —É–ø—Ä—É–≥–æ—Å—Ç—å/–æ—Ç—Å–∫–æ–∫

### üéØ –¢—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (Trigger)
- **Teleport** - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
- **Checkpoint** - —Ç–æ—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- **Activator** - –∞–∫—Ç–∏–≤–∞—Ü–∏—è –¥—Ä—É–≥–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤

### üõ°Ô∏è –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- **Shield** - –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—Ä—É–≥–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- **Multiplier** - —É—Å–∏–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

---

## üöÄ –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ—Å—Ç–æ–π —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–º–µ–¥–ª–µ–Ω–∏—è

```csharp
public class SlowdownFieldEffect : BaseFieldEffect
{
    [Header("–ó–∞–º–µ–¥–ª–µ–Ω–∏–µ")]
    [SerializeField] private float _slowdownFactor = 0.5f;
    
    protected override FieldEffectData CreateDefaultEffectData()
    {
        return new FieldEffectData(FieldEffectType.Slowdown, 2f, 5f, transform.position);
    }
    
    public override void ApplyEffect(IFieldEffectTarget target, float deltaTime)
    {
        if (!_isActive || target == null) return;
        
        Vector3 targetPos = target.GetPosition();
        float distance = Vector3.Distance(transform.position, targetPos);
        
        if (distance > _effectData.radius) return;
        if (!target.CanBeAffectedBy(_effectData.effectType)) return;
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–µ drag
        if (target is MonoBehaviour mb)
        {
            var rb = mb.GetComponent<Rigidbody2D>();
            if (rb != null)
            {
                float slowStrength = _effectData.GetEffectiveStrength(distance);
                rb.drag = Mathf.Lerp(rb.drag, _slowdownFactor, slowStrength * deltaTime);
            }
        }
    }
    
    public override void RemoveEffect(IFieldEffectTarget target)
    {
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π drag
        if (target is MonoBehaviour mb)
        {
            var rb = mb.GetComponent<Rigidbody2D>();
            if (rb != null)
            {
                rb.drag = 0f; // –∏–ª–∏ –∏—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            }
        }
    }
}
```

### –≠—Ñ—Ñ–µ–∫—Ç —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏

```csharp
public class TeleportFieldEffect : BaseFieldEffect
{
    [Header("–¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è")]
    [SerializeField] private Transform _destination;
    [SerializeField] private float _cooldown = 2f;
    
    private Dictionary<IFieldEffectTarget, float> _lastTeleportTime = new();
    
    protected override FieldEffectData CreateDefaultEffectData()
    {
        var data = new FieldEffectData(FieldEffectType.Teleport, 1f, 2f, transform.position);
        data.stackable = false; // –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–µ —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è
        return data;
    }
    
    public override void ApplyEffect(IFieldEffectTarget target, float deltaTime)
    {
        if (!_isActive || target == null || _destination == null) return;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—É–ª–¥–∞—É–Ω
        if (_lastTeleportTime.ContainsKey(target))
        {
            if (Time.time - _lastTeleportTime[target] < _cooldown)
                return;
        }
        
        Vector3 targetPos = target.GetPosition();
        float distance = Vector3.Distance(transform.position, targetPos);
        
        if (distance > _effectData.radius) return;
        if (!target.CanBeAffectedBy(_effectData.effectType)) return;
        
        // –¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ–º
        if (target is MonoBehaviour mb)
        {
            mb.transform.position = _destination.position;
            _lastTeleportTime[target] = Time.time;
            
            // –í–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç
            CreateTeleportEffect(targetPos, _destination.position);
        }
    }
    
    private void CreateTeleportEffect(Vector3 from, Vector3 to)
    {
        // –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Å—Ç–∏—Ü, –∑–≤—É–∫–∞, etc.
        Debug.Log($"–¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è —Å {from} –≤ {to}");
    }
}
```

---

## üé® –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ Gizmos

```csharp
protected override void DrawEffectRadius()
{
    base.DrawEffectRadius();
    
    // –†–∏—Å—É–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    Gizmos.color = Color.white;
    
    // –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª—å—Ü–æ
    float animatedRadius = _effectData.radius + Mathf.Sin(Time.time * 2f) * 0.5f;
    Gizmos.DrawWireCircle(transform.position, animatedRadius);
    
    // –õ—É—á–∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è
    for (int i = 0; i < 8; i++)
    {
        float angle = i * 45f * Mathf.Deg2Rad;
        Vector3 direction = new Vector3(Mathf.Cos(angle), Mathf.Sin(angle), 0f);
        Vector3 rayEnd = transform.position + direction * _effectData.radius;
        Gizmos.DrawLine(transform.position, rayEnd);
    }
}
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –ª–µ–π–±–ª—ã

```csharp
protected override void DrawEffectInfo()
{
    base.DrawEffectInfo();
    
#if UNITY_EDITOR
    if (_effectData != null)
    {
        var labelPos = transform.position + Vector3.up * (_effectData.radius + 1f);
        
        string info = $"{_effectData.effectType} Effect\n";
        info += $"Strength: {_effectData.strength:F1}\n";
        info += $"Radius: {_effectData.radius:F1}\n";
        info += $"Targets: {_currentTargets.Count}\n";
        info += $"Active: {(_isActive ? "YES" : "NO")}";
        
        UnityEditor.Handles.Label(labelPos, info);
    }
#endif
}
```

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

```csharp
private Vector3 _cachedForce;
private float _cacheTime;
private const float CACHE_DURATION = 0.1f;

private Vector3 GetCachedForce(IFieldEffectTarget target, float distance)
{
    if (Time.time - _cacheTime > CACHE_DURATION)
    {
        _cachedForce = CalculateForce(target, distance);
        _cacheTime = Time.time;
    }
    return _cachedForce;
}
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```csharp
private float _lastUpdateTime;
private const float UPDATE_INTERVAL = 1f / 30f; // 30 FPS

protected override void OnUpdateEffect()
{
    if (Time.time - _lastUpdateTime < UPDATE_INTERVAL)
        return;
        
    base.OnUpdateEffect();
    // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    _lastUpdateTime = Time.time;
}
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π

```csharp
protected override bool IsTargetInRange(IFieldEffectTarget target)
{
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º sqrMagnitude –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è sqrt
    float sqrDistance = (target.GetPosition() - transform.position).sqrMagnitude;
    return sqrDistance <= _effectData.radius * _effectData.radius;
}
```

---

## üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

```csharp
protected override void RegisterInSystem()
{
    base.RegisterInSystem();
    
    if (Application.isPlaying)
    {
        Debug.Log($"[{GetType().Name}] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Å–∏—Å—Ç–µ–º–µ: {_effectData.effectType}");
    }
}

public override void ApplyEffect(IFieldEffectTarget target, float deltaTime)
{
    if (_effectData.showDebugInfo)
    {
        Debug.Log($"[{name}] –ü—Ä–∏–º–µ–Ω—è—é —ç—Ñ—Ñ–µ–∫—Ç –∫ {target} —Å —Å–∏–ª–æ–π {_effectData.strength}");
    }
    
    // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞...
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

```csharp
[ContextMenu("Debug Effect Info")]
private void DebugEffectInfo()
{
    Debug.Log($"–≠—Ñ—Ñ–µ–∫—Ç: {_effectData.effectType}");
    Debug.Log($"–ê–∫—Ç–∏–≤–µ–Ω: {_isActive}");
    Debug.Log($"–¶–µ–ª–µ–π –≤ –∑–æ–Ω–µ: {_currentTargets.Count}");
    Debug.Log($"–°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞: {FieldEffectSystem.Instance != null}");
}
```

---

## üìù –ß–µ–∫–ª–∏—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞

- [ ] –î–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø –≤ `FieldEffectType`
- [ ] –°–æ–∑–¥–∞–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ `SetDefaultsForEffectType()`
- [ ] –ö–ª–∞—Å—Å –Ω–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ç `BaseFieldEffect`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `CreateDefaultEffectData()`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `ApplyEffect()`
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∞–±—Ä–∏–∫–∞ –≤ `FieldEffectFactory`
- [ ] –°–æ–∑–¥–∞–Ω–æ –º–µ–Ω—é —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ù–∞–ø–∏—Å–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üöÄ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø–æ–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—É—é –∏ –≥–∏–±–∫—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ª—é–±—ã—Ö —Ç–∏–ø–æ–≤ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –¥–≤–∏–∂–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤. –°–ª–µ–¥—É–π—Ç–µ —ç—Ç–æ–º—É –≥–∞–π–¥—É, –∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º—É –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

**–ü–æ–º–Ω–∏—Ç–µ:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ - –≤–∞–º –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ª–æ–≥–∏–∫—É –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è!

### üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞
–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –æ—Ç `BaseFieldEffect`
2. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `ApplyEffect()`
3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é `FieldEffectSystem`
4. –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ Unity